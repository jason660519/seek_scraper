# 專案開發環境啟動步驟手冊（Windows 10 + PowerShell）

> 版本：2025-09-25 · 適用環境：Windows 10 / PowerShell 5.1 以上

本手冊說明如何在 Windows 10 上使用 PowerShell 建立 SEEK Job Crawler 的開發環境。流程嚴格依循專案規範，透過 `uv` 管理 Python 3.12 虛擬環境並安裝所有依賴。

---

## 1. 先決條件確認

1. **作業系統**：Windows 10 x64。
2. **PowerShell 版本**：執行下列指令確認版本 ≥ 5.1。

    ```powershell
    $PSVersionTable.PSVersion
    ```

3. **Git**：確保已安裝，方便取得程式碼。
4. **網路權限**：允許 PowerShell 下載並執行遠端腳本（僅限本次程序）。

---

## 2. 取得程式碼

```powershell
# 選擇欲放置專案的目錄
Set-Location "C:\path\to\workspace"

# 下載或更新專案程式碼
# 已有專案時改用 git pull
git clone https://github.com/jason660519/seek_scraper.git "seek job crawler"
Set-Location "seek job crawler"
```

> 若專案已存在，僅需切換至專案根目錄即可。

---

## 3. 安裝或更新 `uv`

`uv` 為專案指定的 Python 套件與虛擬環境管理工具。執行下列指令，缺少時會自動安裝，已安裝則跳過。

```powershell
if (-not (Get-Command uv -ErrorAction SilentlyContinue)) {
    Write-Host "Installing uv..." -ForegroundColor Cyan
    irm https://astral.sh/uv/install.ps1 | iex
}
uv --version
```

---

## 4. 執行自動化環境初始化腳本

專案提供 `scripts/setup_env.ps1` 自動化腳本，負責：

- 建立或更新 `.venv` 虛擬環境（Python 3.12）。
- 依據 `uv.lock` 安裝專案依賴。
- 建立 `.env`（缺少時由 `.env.example` 複製）。
- 建立 `data/` 相關子目錄。
- 執行單元測試驗證環境。

```powershell
Set-ExecutionPolicy -Scope Process -ExecutionPolicy Bypass -Force
./scripts/setup_env.ps1
```

> 若需重新建立虛擬環境，可加入 `-Force` 參數，例如 `./scripts/setup_env.ps1 -Force`。
> 若要略過測試，可加入 `-SkipTests` 參數。

---

## 5. 手動流程（如不使用腳本）

```powershell
# 1. 建立 / 更新虛擬環境（會自動建立 .venv）
uv venv --python 3.12

# 2. 安裝依賴（遵循 uv.lock）
uv sync --frozen

# 3. 建立環境變數檔
if (-not (Test-Path .env) -and (Test-Path .env.example)) {
    Copy-Item .env.example .env
}

# 4. 建立資料目錄
New-Item -ItemType Directory -Force -Path data, data/raw, data/processed, data/logs, data/cache | Out-Null
```

---

## 6. 啟用虛擬環境（可選）

一般開發流程可直接使用 `uv run ...` 執行指令；若需互動式啟用虛擬環境，輸入：

```powershell
.\.venv\Scripts\Activate.ps1
```

停用虛擬環境：

```powershell
deactivate
```

---

## 7. 環境驗證步驟

確認依賴與測試均通過：

```powershell
# 顯示 Python 版本
uv run python --version

# 執行測試套件
uv run pytest

# 檢查 CLI 入口點
uv run seek-crawler --help
uv run proxy-tester --help
```

所有指令應於專案根目錄執行。若測試失敗，請根據錯誤訊息調整設定或重新執行腳本。

---

## 8. 常用開發指令

```powershell
# 執行核心爬蟲（範例）
uv run python .\src\main.py --keyword "Data Scientist" --location "Sydney"

# 執行簡化版爬蟲
uv run python .\src\main_simple.py

# 啟動代理測試 CLI
uv run python .\proxy_management\testers\advanced_proxy_tester.py --help
```

---

## 9. 疑難排解

| 問題 | 可能原因 | 解決方案 |
| --- | --- | --- |
| `uv` 指令找不到 | 未安裝或未重新開啟終端機 | 重新執行安裝指令，或開新 PowerShell 視窗 |
| `uv sync` 失敗 | 網路被防火牆阻擋 | 確認可連線至 PyPI，必要時設置公司代理 |
| 測試失敗 | `.env` 缺少必要設定、資料目錄不存在 | 重新執行 `setup_env.ps1`，或手動檢查 `.env` 與 `data/` |
| 無法執行腳本 | 執行原則限制腳本執行 | 使用 `Set-ExecutionPolicy -Scope Process -ExecutionPolicy Bypass -Force` |

---

遵循上述步驟即可在 Windows 10 上快速完成專案開發環境初始化。若流程有更新，請同步調整本文件。
