# Documentation Style Guide

本指南統一專案內 Markdown / MDX 文件風格，確保一致與可維護。

## 1. Heading 規則

- 單一 H1 (檔案第一行)；後續依層級遞增不可跳級。
- 禁用粗體包裹標題 (例如: `## **標題**`)。
- 若同層級出現語意重複需加括號限定語境，例如：`#### 外部 PPM 模組（評分系統）`。

## 2. 段落與空白

- 標題上、下各保留 1 空行 (除檔案開頭 H1 上方)。
- 連續列表或程式碼區塊上下保留 1 空行。

## 3. 程式碼區塊

- 使用三反引號 fenced style，必須標註語言：` ```python ` / ` ```toml ` / ` ```yaml ` / ` ```text `。
- 目錄/樹狀結構使用 `text`。
- 行內程式碼片段使用單反引號，避免整段以逐行反引號呈現。
- 禁用縮排式 code block。

## 4. List 規範

- 使用 `-` 作為統一項目符號；巢狀兩空格縮排。
- 數字列表使用 `1.`、`2.` 正常遞增；不使用 `1)` / `１．` 等變體。

## 5. 語言與中英文間距

- 中英文 & 數字之間可視可讀性酌情加空格：`API 驗證模組`、`FastAPI 服務`。
- 保留專有詞大小寫 (FastAPI / HTTP / ETL)。

## 6. 代碼風格 (展示層)

- Python 片段：盡量展示最小可讀單元；必要時以 `# ...` 代表省略。
- Shell/CLI：不含 `$` 前綴，方便複製。
- Mermaid 圖使用 ` ```mermaid ` 並避免行尾雙空格。

## 7. 表格

- 使用 `|` 分隔，對齊非強制；表格上、下保留 1 空行。
- 不在表格內使用粗體包裹整欄標題除非語意強調。

## 8. 引用與提示

- 使用 `>` 作為補充敘述或來源說明，不用來取代標題。

## 9. 文件內鏈與引用

- 標題生成的錨點統一使用 GitHub 規則 (小寫，空白轉 `-`，移除標點符號)。
- 跨文件參考採描述式：`詳見〈Proxy IP 驗證模組建構範例說明書〉`。

## 10. 常見錯誤避免

| 問題 | 例子 | 正確寫法 |
| ---- | ---- | -------- |
| 粗體標題 | `## **核心架構**` | `## 核心架構` |
| 多重 H1 | 多於一個 `# 標題` | 僅第一行使用 H1 |
| 行內逐行反引號 | 每行都 `code` | 使用 fenced code block |
| 無語言 fenced | ``` | ```python |
| 跳級標題 | H1 後直接 H3 | H1 → H2 → H3 |

## 11. 服務層抽象統一描述

在談到系統模組 (驗證、抓取、存儲、ETL、反偵測) 時，若需與後端架構對應，統一用法：

- FetchService：外部資源/頁面抓取、Proxy 取得、HTML 抽取
- ValidationService：Proxy 驗證、品質評分、合規/指標判定
- PersistenceService：代理狀態與結果入庫、指標/統計存儲

可於文件新增小節：`服務層抽象映射` 說明該文件內容與三層關係。

## 12. 文件類型與命名

- 多語言版本：英文 `ARCHITECTURE_EN.md`；中文為主不需後綴。
- 比較/報告類：`*_比較報告書_YYYY-MM-DD.md`
- 流程/方案：`ETL_*.md` 或 `*_設計方案.md`

## 13. 提交前檢查清單

- [ ] 單一 H1
- [ ] 無粗體標題
- [ ] 所有 fenced 有語言
- [ ] 無跳級標題
- [ ] 無逐行反引號段落
- [ ] 樹狀/示意圖使用 text 或 mermaid
- [ ] 服務層若相關已補對應小節

---
若需自動化，可後續新增 markdownlint 設定與 pre-commit hook。
