//tealium universal tag - utag.207 ut4.0.202509050043, Copyright 2025 Tealium.com Inc. All Rights Reserved.
window.rtbhEvents=window.rtbhEvents||[];try{(function(id,loader){var u={id:id};utag.o[loader].sender[id]=u;u.ev={view:1,link:1};u.initialized=false;u.scriptrequested=false;u.EVENTS_LIST={category:'category',offer:'offer',wishlist:'wishlist',size:'size',listing:'listing',basketadd:'basketadd',basketstatus:'basketstatus',conversion:'conversion'};u.clearEmptyKeys=function(object){Object.keys(object).forEach(function(key){if(object[key]===''||object[key]===undefined){delete object[key];}});return object;};u.mapFunc=function(arr,obj,item){var i=arr.shift();obj[i]=obj[i]||{};if(arr.length>0){u.mapFunc(arr,obj[i],item);}else{obj[i]=item;}};u.callback=function(){u.data.events.forEach(function(eventName){u.sendEvent(eventName);});};u.getItemByIndexFromArray=function(array,index){if(!Array.isArray(array)){return"";}
return array[index]||"";}
u.sendEvent=function(eventName){var eventObject;switch(eventName){case u.EVENTS_LIST.category:{eventObject={eventType:eventName,categoryId:u.data.categoryId};break;}
case u.EVENTS_LIST.offer:case u.EVENTS_LIST.wishlist:case u.EVENTS_LIST.basketadd:{eventObject={eventType:eventName,offerId:u.data.offerId};break;}
case u.EVENTS_LIST.size:{eventObject={eventType:eventName,size:u.data.size};break;}
case u.EVENTS_LIST.listing:case u.EVENTS_LIST.basketstatus:{eventObject={eventType:eventName,offerIds:u.data.offerIds};break;}
case u.EVENTS_LIST.conversion:{eventObject={eventType:eventName,conversionClass:u.data.conversionClass,conversionSubClass:u.data.conversionSubClass,conversionId:u.data.conversionId,conversionValue:u.data.conversionValue,offerIds:u.data.offerIds,};break;}
default:{eventObject={eventType:eventName};}}
utag.ut.merge(u.clearEmptyKeys(eventObject),u.data[eventName],1);window.rtbhEvents.push(eventObject);};u.map={};u.extend=[function(a,b){try{if(1){var loginId=(typeof b.loginId==='undefined')?'unknown':b.loginId;var rtbhEvents=window.rtbhEvents||[];if(b.eventName=='home_displayed'){rtbhEvents.push({eventType:'home'},{eventType:'uid',id:loginId});}else if(b.eventName=='job_details_displayed'){rtbhEvents.push({eventType:'offer',offerId:b.jobId},{eventType:'uid',id:loginId},{eventType:"custom",name:'classification',value:b.jobClassificationId},{eventType:"custom",name:'sub-classification',value:b.jobSubClassificationId,});}else if(b.eventName=='search_results_displayed'){rtbhEvents.push({eventType:'listing',offerIds:b.searchKeyword},{eventType:'uid',id:loginId});rtbhEvents.push({eventType:"custom",name:'job-search',value:'1'});if(typeof b.searchClassificationId!=='undefined'||typeof b.classificationId!=='undefined'){rtbhEvents.push({eventType:"custom",name:'classification',value:b.classificationId});}
if(typeof b.searchSubClassificationId!=='undefined'||typeof b.subClassificationId!=='undefined'){(rtbhEvents=window.rtbhEvents||[]).push({eventType:"custom",name:'sub-classification',value:b.subClassificationId});}}else if(b.eventName=='job_save_succeeded'){rtbhEvents.push({eventType:"custom",name:'save-job',value:b.jobId});}else if(b.eventName.includes('apply_complete_displayed')){rtbhEvents.push({eventType:'conversion',conversionClass:'order',conversionSubClass:'purchase',conversionId:'SEEK-'+b.loginId,conversionValue:'1',offerIds:[b.jobId]},{eventType:'uid',id:loginId});}}}catch(e){utag.DB(e)}}];u.send=function(utag_event,data_layer){if(!u.ev[utag_event]&&u.ev.all===undefined){utag.DB('send:207:EVENT NOT SUPPORTED:COMPLETE');return;}
utag.DB('send:207');utag.DB(data_layer);var a,b,c,d,e,f,g,h,query_params;a=utag_event;b=data_layer;u.data={qsp_delim:'&',kvp_delim:'=',base_url:'https://tags.creativecdn.com/##utag_tagging_hash##.js',tagging_hash:'GNnNkhlrBDtRuADp2B0z',region:'asia',eventType:'',categoryId:'',offerId:'',size:'',offerIds:'',conversionClass:'',conversionSubClass:'',conversionId:'',conversionValue:'',uid:'',order_id:'',order_subtotal:'',product_id:[],product_category:[],custom:{},events:[]};for(c=0;c<u.extend.length;c++){try{d=u.extend[c](a,b);if(d==false)return}catch(e){}};utag.DB('send:207:EXTENSIONS');utag.DB(data_layer);query_params=[];Object.keys(utag.loader.GV(u.map)).forEach(function(mapping_key){if(data_layer[mapping_key]!==undefined&&data_layer[mapping_key]!==''){var destinations=u.map[mapping_key].split(',');destinations.forEach(function(parameter){u.mapFunc(parameter.split('.'),u.data,data_layer[mapping_key]);});}else{var event_destinations=mapping_key.split(':');if(event_destinations.length===2&&String(data_layer[event_destinations[0]])===String(event_destinations[1])){if(u.map[mapping_key]){u.data.events=u.data.events.concat(u.map[mapping_key].split(','));}}}});utag.DB('send:207:MAPPINGS');utag.DB(u.data);var eCommerceMapping=[{eCommerceData:data_layer._corder,name:'conversionId',isArray:false},{eCommerceData:data_layer._ctotal,name:'conversionValue',isArray:false},{eCommerceData:data_layer._cprod,name:'offerIds',isArray:true}];eCommerceMapping.forEach(function(dataObject){if(!dataObject.isArray){u.data[dataObject.name]=u.data[dataObject.name]||dataObject.eCommerceData||'';}else if(u.data[dataObject.name].length===0&&dataObject.eCommerceData!==undefined&&dataObject.isArray){u.data[dataObject.name]=dataObject.eCommerceData.slice(0);}});u.data.offerId=u.data.offerId||u.getItemByIndexFromArray(u.data.offerIds,0);if(!u.data.tagging_hash){utag.DB(u.id+': Tag not fired: Required attribute tagging_hash not populated');return;}
u.data.base_url=u.data.base_url.replace("##utag_tagging_hash##",u.data.tagging_hash);if(u.initialized){u.callback();}else{if(!u.scriptrequested){u.scriptrequested=true;u.initialized=true;window.rtbhEvents.push({eventType:'init',value:u.data.tagging_hash,dc:u.data.region},{eventType:'uid',id:u.data.uid||'unknown'});utag.ut.loader({type:'script',src:u.data.base_url,cb:u.callback,loc:'script',id:'utag_207',attrs:{}});}}
utag.DB('send:207:COMPLETE');};utag.o[loader].loader.LOAD(id);}('207','seek.candidate-main'));}catch(error){utag.DB(error);}
